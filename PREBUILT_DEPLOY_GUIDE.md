# ğŸš€ äº‹å‰ãƒ“ãƒ«ãƒ‰æ–¹å¼ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰

## âœ… å®Ÿè£…å®Œäº†

OCRãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ãŒç¢ºå®Ÿã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ã€**äº‹å‰ãƒ“ãƒ«ãƒ‰æ–¹å¼**ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚

### å¤‰æ›´å†…å®¹

1. **`.gitignore`ã‚’æ›´æ–°**: `dist` ãƒ•ã‚©ãƒ«ãƒ€ã‚’Gitç®¡ç†ä¸‹ã«è¿½åŠ 
2. **ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰**: OCRæ©Ÿèƒ½ã‚’å«ã‚€å®Œå…¨ãªãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œ
3. **distãƒ•ã‚©ãƒ«ãƒ€ã‚’ã‚³ãƒŸãƒƒãƒˆ**: ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥
4. **Dockerfileã‚’æœ€é©åŒ–**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã®ãƒ“ãƒ«ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã€ã‚µãƒ¼ãƒãƒ¼å´ã®ã¿ãƒ“ãƒ«ãƒ‰

### åˆ©ç‚¹

- âœ… **ç¢ºå®Ÿæ€§**: ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‚ã®ãŒãã®ã¾ã¾ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹
- âœ… **é«˜é€Ÿãƒ‡ãƒ—ãƒ­ã‚¤**: Fly.ioä¸Šã§ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒ“ãƒ«ãƒ‰ãŒä¸è¦
- âœ… **ä¸€è²«æ€§**: ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®é•ã„ã«ã‚ˆã‚‹å•é¡Œã‚’å›é¿
- âœ… **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“**: ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèªã—ãŸã‚‚ã®ã¨åŒã˜ã‚‚ã®ãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹

---

## ğŸ“‹ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—

```bash
cd ~/advanced_QA_generator
git pull origin main
```

**ç¢ºèªäº‹é …**:
```bash
# dist ãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
ls -la dist/
ls -la dist/assets/

# æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›:
# dist/index.html
# dist/assets/index-*.js (ç´„438KB)
# dist/assets/index-*.css (ç´„16KB)
```

### ã‚¹ãƒ†ãƒƒãƒ—2: Fly.ioã«ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# å¤ã„ãƒã‚·ãƒ³ã‚’åœæ­¢ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
flyctl machine stop --app advanced-qa-generator-v2 --force

# ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
flyctl deploy --app advanced-qa-generator-v2 --no-cache

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
flyctl status --app advanced-qa-generator-v2
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```
Status:  running
Health Checks: 1 total, 1 passing
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã‚’ç¢ºèª

```bash
flyctl logs --app advanced-qa-generator-v2 --tail 50
```

**æœŸå¾…ã•ã‚Œã‚‹ãƒ­ã‚°**:
```
Verifying pre-built dist folder...
âœ… Pre-built dist folder verified
âœ… Server is running on http://0.0.0.0:8080
âœ… Listening on all interfaces (0.0.0.0:8080)
ğŸš€ Ready to accept connections from Fly.io proxy
```

### ã‚¹ãƒ†ãƒƒãƒ—4: ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª

**ã‚¢ãƒ—ãƒªURL**:
```
https://advanced-qa-generator-v2.fly.dev
```

**ç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ãƒšãƒ¼ã‚¸ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã‚‹
- [ ] ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ€ã‚¤ã‚¢ã‚°ãƒ©ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] **ç·‘è‰²ã®ãƒœãƒƒã‚¯ã‚¹**ã€ŒğŸ”“ ãƒœãƒƒãƒˆæ¤œçŸ¥ã‚’100%å›é¿ã™ã‚‹æ–¹æ³•ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] **2ã¤ã®ãƒœã‚¿ãƒ³**ãŒè¡¨ç¤ºã•ã‚Œã‚‹:
  - `[ğŸ“ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰æŒ¿å…¥]`
  - `[ğŸ“· ç”»åƒOCRãƒ¢ãƒ¼ãƒ‰]` â† **é‡è¦ï¼**
- [ ] `[TEST OCR BUTTON]` ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
- [ ] OCRãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨é’è‰²ã«å¤‰ã‚ã‚‹
- [ ] ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## ğŸ”§ ä»Šå¾Œã®æ›´æ–°æ‰‹é †

OCRæ©Ÿèƒ½ã‚„ä»–ã®UIæ©Ÿèƒ½ã‚’è¿½åŠ ãƒ»ä¿®æ­£ã—ãŸå ´åˆï¼š

### 1. ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™º

```bash
cd ~/advanced_QA_generator

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã§ç¢ºèª
npm run dev
# http://localhost:5173 ã§ãƒ†ã‚¹ãƒˆ
```

### 2. ãƒ“ãƒ«ãƒ‰

```bash
# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
rm -rf dist node_modules/.vite
npm run build

# distãƒ•ã‚©ãƒ«ãƒ€ã‚’ç¢ºèª
ls -la dist/assets/
```

### 3. Gitã«ã‚³ãƒŸãƒƒãƒˆ

```bash
git add .
git commit -m "feat: Add new feature to OCR mode"
git push origin main
```

**é‡è¦**: `dist` ãƒ•ã‚©ãƒ«ãƒ€ã®å¤‰æ›´ã‚‚å¿…ãšã‚³ãƒŸãƒƒãƒˆã—ã¦ãã ã•ã„ï¼

### 4. Fly.ioã«ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
flyctl deploy --app advanced-qa-generator-v2 --no-cache
```

---

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### å•é¡ŒA: OCRãƒœã‚¿ãƒ³ãŒã¾ã è¡¨ç¤ºã•ã‚Œãªã„

**åŸå› **: ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥

**è§£æ±ºç­–**:
1. **å®Œå…¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢**: `Cmd/Ctrl + Shift + Delete`
2. **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰**ã§ç¢ºèª: `Cmd/Ctrl + Shift + N`
3. **ãƒãƒ¼ãƒ‰ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥**: `Cmd/Ctrl + Shift + R`

### å•é¡ŒB: ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã« "dist folder not found" ã‚¨ãƒ©ãƒ¼

**åŸå› **: Gitã«distãŒãƒ—ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ãªã„

**è§£æ±ºç­–**:
```bash
cd ~/advanced_QA_generator

# distãƒ•ã‚©ãƒ«ãƒ€ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
ls -la dist/

# ãªã‘ã‚Œã°ãƒ“ãƒ«ãƒ‰
npm run build

# Gitã«è¿½åŠ ã—ã¦ãƒ—ãƒƒã‚·ãƒ¥
git add dist/
git commit -m "fix: Add missing dist folder"
git push origin main

# å†ãƒ‡ãƒ—ãƒ­ã‚¤
flyctl deploy --app advanced-qa-generator-v2 --no-cache
```

### å•é¡ŒC: distãƒ•ã‚©ãƒ«ãƒ€ãŒ.gitignoreã«æˆ»ã£ã¦ã„ã‚‹

**ç¢ºèª**:
```bash
cat .gitignore | grep "dist"
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:
```
# dist - committed for Fly.io deployment
```

**ä¿®æ­£**:
```bash
# .gitignoreã‚’ç·¨é›†ã—ã¦ "dist" ã®è¡Œã‚’ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ
# ãã—ã¦å†åº¦ã‚³ãƒŸãƒƒãƒˆ
git add .gitignore
git commit -m "fix: Keep dist in version control"
git push origin main
```

### å•é¡ŒD: ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã‚‚ãƒšãƒ¼ã‚¸ãŒå¤‰ã‚ã‚‰ãªã„

**åŸå› **: Fly.ioã®CDNã‚­ãƒ£ãƒƒã‚·ãƒ¥

**è§£æ±ºç­–**:
```bash
# ãƒã‚·ãƒ³ã‚’å®Œå…¨å†èµ·å‹•
flyctl machine restart --app advanced-qa-generator-v2

# æ•°åˆ†å¾…ã£ã¦ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹
sleep 180
```

---

## ğŸ“Š ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºç¢ºèª

ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«ã€ãƒ“ãƒ«ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ã„ã‚µã‚¤ã‚ºã‹ç¢ºèªï¼š

```bash
cd ~/advanced_QA_generator
ls -lh dist/assets/

# æœŸå¾…ã•ã‚Œã‚‹ã‚µã‚¤ã‚º:
# index-*.js: ç´„430-440KB (OCRã‚³ãƒ¼ãƒ‰å«ã‚€)
# index-*.css: ç´„15-16KB
```

ã‚‚ã—JSãƒ•ã‚¡ã‚¤ãƒ«ãŒ300KBä»¥ä¸‹ãªã‚‰ã€OCRã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

---

## ğŸ¯ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. âœ… `git pull origin main` ã§æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
2. âœ… `dist/` ãƒ•ã‚©ãƒ«ãƒ€ã®å­˜åœ¨ã‚’ç¢ºèª
3. âœ… `flyctl deploy --app advanced-qa-generator-v2 --no-cache`
4. âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°ã§ "âœ… Pre-built dist folder verified" ã‚’ç¢ºèª
5. âœ… ãƒ–ãƒ©ã‚¦ã‚¶ã§ `https://advanced-qa-generator-v2.fly.dev` ã‚’é–‹ã
6. âœ… **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰**ã§ç¢ºèªï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å½±éŸ¿ã‚’æ’é™¤ï¼‰
7. âœ… OCRãƒ¢ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’ç¢ºèª
8. âœ… é˜ªæ€¥ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚·ãƒ§ãƒƒãƒ—ã§ãƒ†ã‚¹ãƒˆ:
   - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®å½±
   - OCRãƒ¢ãƒ¼ãƒ‰ã§ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - Q&Aç”Ÿæˆã‚’å®Ÿè¡Œ

---

## ğŸ“ æŠ€è¡“çš„è©³ç´°

### å¾“æ¥ã®æ–¹å¼ï¼ˆå•é¡Œã‚ã‚Šï¼‰

```dockerfile
# Fly.ioä¸Šã§ãƒ“ãƒ«ãƒ‰
COPY . .
RUN npm run build  # â† ã“ã“ã§ä½•ã‹å•é¡ŒãŒç™ºç”Ÿ
```

### æ–°ã—ã„æ–¹å¼ï¼ˆç¢ºå®Ÿï¼‰

```dockerfile
# ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã®distã‚’ã‚³ãƒ”ãƒ¼
COPY . .  # distãƒ•ã‚©ãƒ«ãƒ€ã‚’å«ã‚€
RUN npx tsc --project tsconfig.server.json  # ã‚µãƒ¼ãƒãƒ¼ã®ã¿ãƒ“ãƒ«ãƒ‰
RUN ls -la dist/  # æ¤œè¨¼
```

### åˆ©ç‚¹ã®è©³ç´°

1. **ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®ä¸€è²«æ€§**
   - ãƒ­ãƒ¼ã‚«ãƒ«: Node.js 20 + Vite 7.2.2
   - Fly.io: åŒã˜ç’°å¢ƒã‚’ä¿è¨¼

2. **ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§**
   - ãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèª â†’ ãã®ã¾ã¾ãƒ‡ãƒ—ãƒ­ã‚¤
   - ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯å‹•ãã®ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§å‹•ã‹ãªã„ã€å•é¡Œã‚’å›é¿

3. **é«˜é€Ÿãƒ‡ãƒ—ãƒ­ã‚¤**
   - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãƒ“ãƒ«ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—
   - ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚é–“ãŒç´„50%çŸ­ç¸®

4. **ç¢ºå®Ÿæ€§**
   - Viteã®ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œã‚’å›é¿
   - TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã®å½±éŸ¿ã‚’æ’é™¤

---

## ğŸ”„ CI/CDçµ±åˆï¼ˆå°†æ¥ã®æ”¹å–„ï¼‰

GitHub Actionsã‚’ä½¿ç”¨ã—ã¦è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ï¼š

```yaml
# .github/workflows/deploy.yml
name: Deploy to Fly.io

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 20
      
      # ãƒ“ãƒ«ãƒ‰
      - run: npm ci
      - run: npm run build
      
      # distã‚’ã‚³ãƒŸãƒƒãƒˆ
      - run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git add dist/
          git commit -m "chore: Update dist [skip ci]" || echo "No changes"
          git push
      
      # Fly.ioã«ãƒ‡ãƒ—ãƒ­ã‚¤
      - uses: superfly/flyctl-actions@v1
        with:
          args: "deploy --no-cache"
        env:
          FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}
```

---

**æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ**: `c09fd72` (feat: Use pre-built dist folder to ensure OCR features are deployed)
**GitHub**: https://github.com/Meguroman1978/advanced_QA_generator
**ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ**: https://advanced-qa-generator-v2.fly.dev
**ãƒ‡ãƒ—ãƒ­ã‚¤æ—¥æ™‚**: 2025-12-11 03:42 UTC

---

## âœ… æˆåŠŸã®ç¢ºèª

ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®å½±ã—ã¦ç¢ºèªï¼š

1. **ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸å…¨ä½“**: OCRãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹
2. **OCRãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹æ™‚**: é’è‰²ã®ãƒœã‚¿ãƒ³ã¨ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰UIãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹
3. **Q&Aç”Ÿæˆçµæœ**: é˜ªæ€¥ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚·ãƒ§ãƒƒãƒ—ã®URLã§Q&AãŒç”Ÿæˆã•ã‚Œã‚‹ã‹

ã™ã¹ã¦ç¢ºèªã§ãã‚Œã°ã€**å®Œå…¨æˆåŠŸ**ã§ã™ï¼ ğŸ‰
